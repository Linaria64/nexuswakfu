---
import MainLayout from '../../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';

// R√©cup√©rer les classes depuis la collection
const classes = await getCollection('classes');

// Organiser les classes par r√¥le
const classesByRole = {
  'DPS': classes.filter(clazz => clazz.data.role === 'DPS'),
  'Tank': classes.filter(clazz => clazz.data.role === 'Tank'),
  'Support': classes.filter(clazz => clazz.data.role === 'Support'),
  'Soigneur': classes.filter(clazz => clazz.data.role === 'Soigneur')
};

// Extraire les r√¥les uniques pour les options de filtre
const uniqueRoles = [...new Set(classes.map(clazz => clazz.data.role))].filter(Boolean);

// D√©finir les couleurs pour chaque r√¥le
const roleColors = {
  'DPS': 'from-red-600/80 to-orange-600/80',
  'Tank': 'from-blue-600/80 to-indigo-600/80',
  'Support': 'from-green-600/80 to-emerald-600/80',
  'Soigneur': 'from-teal-600/80 to-cyan-600/80'
};

// Exemple de donn√©es de sorts et passifs pour chaque classe
const spellsAndPassives = {
  "iop": {
    spells: [
      { name: "Col√®re de Iop", description: "Inflige des d√©g√¢ts en zone autour du lanceur", element: "Feu", level: 1 },
      { name: "√âp√©e C√©leste", description: "Invoque une √©p√©e qui attaque les ennemis proches", element: "Air", level: 5 },
      { name: "Bond", description: "Se t√©l√©porte vers la cible et inflige des d√©g√¢ts", element: "Terre", level: 15 },
      { name: "√âp√©e de Jugement", description: "Attaque puissante √† distance avec bonus de d√©g√¢ts critiques", element: "Feu", level: 25 }
    ],
    passives: [
      { name: "Ma√Ætre d'Armes", description: "Augmente les d√©g√¢ts d'√©p√©e de 15%" },
      { name: "Vigueur", description: "Augmente les points de vie maximum de 10%" },
      { name: "Furie", description: "Les attaques critiques g√©n√®rent un point de Furie, augmentant les d√©g√¢ts" }
    ]
  },
  "cra": {
    spells: [
      { name: "Fl√®che Puissante", description: "Attaque √† distance avec bonus de port√©e", element: "Neutre", level: 1 },
      { name: "Fl√®che Explosive", description: "Inflige des d√©g√¢ts en zone au point d'impact", element: "Feu", level: 5 },
      { name: "Fl√®che Glac√©e", description: "Ralentit la cible et inflige des d√©g√¢ts", element: "Eau", level: 15 },
      { name: "Fl√®che Perforante", description: "Traverse les ennemis et les obstacles", element: "Air", level: 25 }
    ],
    passives: [
      { name: "≈íil de Lynx", description: "Augmente la port√©e des sorts de 2 cases" },
      { name: "Concentration", description: "Augmente les chances de coup critique de 10%" },
      { name: "Ma√Ætre Archer", description: "Les attaques √† distance ignorent 15% de la r√©sistance ennemie" }
    ]
  },
  "eniripsa": {
    spells: [
      { name: "Mot Curatif", description: "Soigne un alli√©", element: "Eau", level: 1 },
      { name: "Mot Revigorant", description: "Soigne et donne un bonus de PM", element: "Eau", level: 5 },
      { name: "Mot de Jouvence", description: "Soigne en zone autour de la cible", element: "Eau", level: 15 },
      { name: "Mot Vampirique", description: "Vole de la vie √† l'ennemi", element: "Feu", level: 25 }
    ],
    passives: [
      { name: "B√©n√©diction", description: "Augmente les soins prodigu√©s de 20%" },
      { name: "Aura Apaisante", description: "Les alli√©s proches regagnent 5% de PV par tour" },
      { name: "Ma√Ætre Gu√©risseur", description: "Les sorts de soin peuvent devenir critiques, augmentant leur effet de 50%" }
    ]
  }
};
---

<MainLayout title="Classes de Wakfu" description="D√©couvrez toutes les classes jouables dans Wakfu, leurs caract√©ristiques, sp√©cialit√©s et guides">
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-4xl font-bold mb-6 text-center">Les Classes de Wakfu</h1>
    
    <p class="text-lg mb-8 max-w-3xl mx-auto text-center">
      Explorez les 18 classes uniques de Wakfu, d√©couvrez leurs sorts, passifs et styles de jeu pour trouver celle qui correspond √† votre style.
    </p>

    <!-- Filtres de classes -->
    <div class="mb-8 bg-gray-800/50 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-gray-700">
      <h2 class="text-xl font-semibold mb-4">Filtrer les classes</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div>
          <label class="block mb-2 text-wakfu-secondary font-medium">Recherche</label>
          <div class="relative">
            <input type="text" id="search-input" placeholder="Nom de la classe..." class="w-full p-3 pl-10 rounded-lg bg-gray-700/70 text-white border border-gray-600 focus:border-wakfu-secondary focus:ring-1 focus:ring-wakfu-secondary outline-none transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 absolute left-3 top-3.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
          </div>
        </div>
        
        <div>
          <label class="block mb-2 text-wakfu-secondary font-medium">R√¥le</label>
          <select id="role-filter" class="w-full p-3 rounded-lg bg-gray-700/70 text-white border border-gray-600 focus:border-wakfu-secondary focus:ring-1 focus:ring-wakfu-secondary outline-none">
            <option value="">Tous les r√¥les</option>
            {uniqueRoles.map(role => <option value={role}>{role}</option>)}
          </select>
        </div>
        
        <div>
          <label class="block mb-2 text-wakfu-secondary font-medium">Difficult√©</label>
          <select id="difficulty-filter" class="w-full p-3 rounded-lg bg-gray-700/70 text-white border border-gray-600 focus:border-wakfu-secondary focus:ring-1 focus:ring-wakfu-secondary outline-none">
            <option value="">Toutes les difficult√©s</option>
            <option value="1">Facile (1)</option>
            <option value="2">Mod√©r√©e (2)</option>
            <option value="3">Difficile (3)</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Liste des classes -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
      {classes.map((clazz) => {
        const roleColor = roleColors[clazz.data.role] || 'from-wakfu-primary/80 to-wakfu-secondary/80';
        return (
          <div class="class-card bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl overflow-hidden shadow-xl border border-gray-700 hover:border-wakfu-secondary transition-all duration-300 transform hover:-translate-y-1">
            <div class="p-0">
              {/* Header avec banni√®re color√©e */}
              <div class={`bg-gradient-to-r ${roleColor} p-4`}>
                <div class="flex justify-between items-center">
                  <h3 class="text-2xl font-bold text-white">{clazz.data.name}</h3>
                  <div class="flex gap-2">
                    <span class="inline-block px-3 py-1 rounded-full text-xs font-medium bg-blue-600 text-white">
                      {clazz.data.role}
                    </span>
                    <span class="inline-block px-3 py-1 rounded-full text-xs font-medium bg-purple-600 text-white">
                      Difficult√© {clazz.data.difficulty}
                    </span>
                  </div>
                </div>
              </div>
              
              <div class="p-6">
                <p class="text-gray-300 mb-6 text-lg">
                  {clazz.data.description?.substring(0, 120)}...
                </p>
                
                <div class="mb-6">
                  <h4 class="font-semibold mb-3 flex items-center text-wakfu-secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                      <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z" />
                    </svg>
                    Caract√©ristiques
                  </h4>
                  <div class="grid grid-cols-2 gap-2">
                    <div class="bg-gray-700/50 p-2 rounded-lg">
                      <span class="text-sm font-medium block">Style de combat</span>
                      <p class="text-xs text-gray-400">{clazz.data.combatStyle}</p>
                    </div>
                    <div class="bg-gray-700/50 p-2 rounded-lg">
                      <span class="text-sm font-medium block">Sp√©cialit√©</span>
                      <p class="text-xs text-gray-400">{clazz.data.specialty}</p>
                    </div>
                    <div class="bg-gray-700/50 p-2 rounded-lg">
                      <span class="text-sm font-medium block">Force</span>
                      <p class="text-xs text-green-400">{clazz.data.strengths}</p>
                    </div>
                    <div class="bg-gray-700/50 p-2 rounded-lg">
                      <span class="text-sm font-medium block">Faiblesse</span>
                      <p class="text-xs text-red-400">{clazz.data.weaknesses}</p>
                    </div>
                  </div>
                </div>
                
                <div class="flex justify-between">
                  <button 
                    class="view-spells bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm flex items-center transition-all" 
                    data-class={clazz.slug}
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clip-rule="evenodd" />
                    </svg>
                    Voir les sorts
                  </button>
                  <a 
                    href={`/classes/${clazz.slug}/`}
                    class="bg-gradient-to-r from-wakfu-primary to-wakfu-secondary hover:from-wakfu-primary/90 hover:to-wakfu-secondary/90 text-white px-4 py-2 rounded-lg text-sm flex items-center transition-all"
                  >
                    Guide complet
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                  </a>
                </div>
              </div>
            </div>
          </div>
        )
      })}
    </div>
    
    <!-- Modal pour les sorts et passifs -->
    <div id="spells-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50">
      <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto border border-gray-700 shadow-xl">
        <div class="flex justify-between items-center mb-6">
          <h2 id="modal-title" class="text-2xl font-bold">Sorts et passifs</h2>
          <button id="close-modal" class="text-gray-400 hover:text-white text-xl bg-gray-700 hover:bg-gray-600 p-2 rounded-full transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        
        <div class="space-y-6">
          <div>
            <h3 class="text-xl font-bold mb-4 border-b border-gray-700 pb-2 text-wakfu-secondary">Sorts</h3>
            <div id="spells-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <!-- Remplit dynamiquement par JavaScript -->
            </div>
          </div>
          
          <div>
            <h3 class="text-xl font-bold mb-4 border-b border-gray-700 pb-2 text-wakfu-secondary">Passifs</h3>
            <div id="passives-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <!-- Remplit dynamiquement par JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Tableau de comparaison des classes -->
    <div class="mb-12">
      <h2 class="text-2xl font-bold mb-6 text-center">Comparaison des Classes</h2>
      <div class="overflow-x-auto rounded-xl border border-gray-700 shadow-lg">
        <table class="w-full text-sm">
          <thead>
            <tr class="bg-gray-800">
              <th class="px-4 py-3 text-left">Classe</th>
              <th class="px-4 py-3 text-left">R√¥le</th>
              <th class="px-4 py-3 text-left">Difficult√©</th>
              <th class="px-4 py-3 text-left">Style de combat</th>
              <th class="px-4 py-3 text-left">Forces</th>
              <th class="px-4 py-3 text-left">Faiblesses</th>
            </tr>
          </thead>
          <tbody>
            {classes.map((clazz) => (
              <tr class="border-b border-gray-700 hover:bg-gray-700/50 transition-colors">
                <td class="px-4 py-3 font-medium">{clazz.data.name}</td>
                <td class="px-4 py-3">{clazz.data.role}</td>
                <td class="px-4 py-3">{clazz.data.difficulty}/3</td>
                <td class="px-4 py-3">{clazz.data.combatStyle}</td>
                <td class="px-4 py-3 text-green-400">{clazz.data.strengths}</td>
                <td class="px-4 py-3 text-red-400">{clazz.data.weaknesses}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
    
    <!-- Guide pour choisir une classe -->
    <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 mb-8 shadow-lg border border-gray-700">
      <h2 class="text-2xl font-bold mb-4 border-b border-gray-700 pb-2 text-wakfu-secondary">Comment choisir sa classe ?</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-xl font-semibold mb-3 flex items-center">
            <span class="text-wakfu-secondary mr-2">üéÆ</span>
            Facteurs √† consid√©rer
          </h3>
          <ul class="list-none pl-0 space-y-2 text-gray-300">
            <li class="flex items-start bg-gray-700/30 p-3 rounded-lg">
              <span class="text-wakfu-secondary mr-2">‚ú¶</span>
              <div>
                <span class="font-medium text-white">Style de jeu</span> - Pr√©f√©rez-vous jouer √† distance, au corps √† corps, ou soutenir votre √©quipe ?
              </div>
            </li>
            <li class="flex items-start bg-gray-700/30 p-3 rounded-lg">
              <span class="text-wakfu-secondary mr-2">‚ú¶</span>
              <div>
                <span class="font-medium text-white">Difficult√©</span> - Les classes faciles sont plus accessibles pour les d√©butants, tandis que les classes difficiles offrent plus de complexit√©.
              </div>
            </li>
            <li class="flex items-start bg-gray-700/30 p-3 rounded-lg">
              <span class="text-wakfu-secondary mr-2">‚ú¶</span>
              <div>
                <span class="font-medium text-white">R√¥le</span> - Chaque groupe a besoin d'une vari√©t√© de r√¥les pour r√©ussir dans les donjons et combats difficiles.
              </div>
            </li>
            <li class="flex items-start bg-gray-700/30 p-3 rounded-lg">
              <span class="text-wakfu-secondary mr-2">‚ú¶</span>
              <div>
                <span class="font-medium text-white">Esth√©tique</span> - Choisissez une classe dont le th√®me et le style visuel vous plaisent !
              </div>
            </li>
          </ul>
        </div>
        <div>
          <h3 class="text-xl font-semibold mb-3 flex items-center">
            <span class="text-wakfu-secondary mr-2">üèÜ</span>
            Recommandations par r√¥le
          </h3>
          <div class="space-y-3">
            <div class="bg-gray-700/30 p-3 rounded-lg">
              <h4 class="font-medium text-white mb-1">Pour les d√©butants :</h4>
              <div class="flex flex-wrap gap-2">
                <span class="bg-red-600/40 text-white px-2 py-1 rounded text-xs">Iop (DPS)</span>
                <span class="bg-blue-600/40 text-white px-2 py-1 rounded text-xs">Feca (Tank)</span>
                <span class="bg-teal-600/40 text-white px-2 py-1 rounded text-xs">Eniripsa (Soigneur)</span>
              </div>
            </div>
            <div class="bg-gray-700/30 p-3 rounded-lg">
              <h4 class="font-medium text-white mb-1">Pour joueurs interm√©diaires :</h4>
              <div class="flex flex-wrap gap-2">
                <span class="bg-red-600/40 text-white px-2 py-1 rounded text-xs">Cra (DPS)</span>
                <span class="bg-blue-600/40 text-white px-2 py-1 rounded text-xs">Sacrieur (Tank)</span>
                <span class="bg-green-600/40 text-white px-2 py-1 rounded text-xs">Osamodas (Support)</span>
              </div>
            </div>
            <div class="bg-gray-700/30 p-3 rounded-lg">
              <h4 class="font-medium text-white mb-1">Pour joueurs exp√©riment√©s :</h4>
              <div class="flex flex-wrap gap-2">
                <span class="bg-red-600/40 text-white px-2 py-1 rounded text-xs">Xelor (DPS)</span>
                <span class="bg-blue-600/40 text-white px-2 py-1 rounded text-xs">Ouginak (Tank)</span>
                <span class="bg-green-600/40 text-white px-2 py-1 rounded text-xs">Sadida (Support)</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</MainLayout>

<script>
  // Donn√©es des sorts et passifs
  const spellsAndPassives = {
    "iop": {
      name: "Iop",
      spells: [
        { name: "Col√®re de Iop", description: "Inflige des d√©g√¢ts en zone autour du lanceur", element: "Feu", level: 1 },
        { name: "√âp√©e C√©leste", description: "Invoque une √©p√©e qui attaque les ennemis proches", element: "Air", level: 5 },
        { name: "Bond", description: "Se t√©l√©porte vers la cible et inflige des d√©g√¢ts", element: "Terre", level: 15 },
        { name: "√âp√©e de Jugement", description: "Attaque puissante √† distance avec bonus de d√©g√¢ts critiques", element: "Feu", level: 25 }
      ],
      passives: [
        { name: "Ma√Ætre d'Armes", description: "Augmente les d√©g√¢ts d'√©p√©e de 15%" },
        { name: "Vigueur", description: "Augmente les points de vie maximum de 10%" },
        { name: "Furie", description: "Les attaques critiques g√©n√®rent un point de Furie, augmentant les d√©g√¢ts" }
      ]
    },
    "cra": {
      name: "Cra",
      spells: [
        { name: "Fl√®che Puissante", description: "Attaque √† distance avec bonus de port√©e", element: "Neutre", level: 1 },
        { name: "Fl√®che Explosive", description: "Inflige des d√©g√¢ts en zone au point d'impact", element: "Feu", level: 5 },
        { name: "Fl√®che Glac√©e", description: "Ralentit la cible et inflige des d√©g√¢ts", element: "Eau", level: 15 },
        { name: "Fl√®che Perforante", description: "Traverse les ennemis et les obstacles", element: "Air", level: 25 }
      ],
      passives: [
        { name: "≈íil de Lynx", description: "Augmente la port√©e des sorts de 2 cases" },
        { name: "Concentration", description: "Augmente les chances de coup critique de 10%" },
        { name: "Ma√Ætre Archer", description: "Les attaques √† distance ignorent 15% de la r√©sistance ennemie" }
      ]
    },
    "eniripsa": {
      name: "Eniripsa",
      spells: [
        { name: "Mot Curatif", description: "Soigne un alli√©", element: "Eau", level: 1 },
        { name: "Mot Revigorant", description: "Soigne et donne un bonus de PM", element: "Eau", level: 5 },
        { name: "Mot de Jouvence", description: "Soigne en zone autour de la cible", element: "Eau", level: 15 },
        { name: "Mot Vampirique", description: "Vole de la vie √† l'ennemi", element: "Feu", level: 25 }
      ],
      passives: [
        { name: "B√©n√©diction", description: "Augmente les soins prodigu√©s de 20%" },
        { name: "Aura Apaisante", description: "Les alli√©s proches regagnent 5% de PV par tour" },
        { name: "Ma√Ætre Gu√©risseur", description: "Les sorts de soin peuvent devenir critiques, augmentant leur effet de 50%" }
      ]
    },
    "feca": {
      name: "Feca",
      spells: [
        { name: "Armure Terrestre", description: "Cr√©e un bouclier qui absorbe les d√©g√¢ts", element: "Terre", level: 1 },
        { name: "Glyphe Protecteur", description: "Place un glyphe qui r√©duit les d√©g√¢ts subis", element: "Eau", level: 5 },
        { name: "Bastion", description: "Augmente la r√©sistance aux d√©g√¢ts pour tous les alli√©s proches", element: "Terre", level: 15 },
        { name: "T√©l√©portation", description: "Se t√©l√©porte ou t√©l√©porte un alli√© vers une case cibl√©e", element: "Air", level: 25 }
      ],
      passives: [
        { name: "Ma√Ætre des Glyphes", description: "Augmente la dur√©e des glyphes de 1 tour" },
        { name: "Armure Naturelle", description: "R√©duit tous les d√©g√¢ts subis de 5%" },
        { name: "Gardien", description: "Peut intercepter une attaque destin√©e √† un alli√© 1 fois par combat" }
      ]
    }
  };
  
  // Filtrage des classes
  const searchInput = document.getElementById('search-input');
  const roleFilter = document.getElementById('role-filter');
  const difficultyFilter = document.getElementById('difficulty-filter');
  const classCards = document.querySelectorAll('.class-card');

  function filterClasses() {
    const searchTerm = searchInput.value.toLowerCase();
    const roleValue = roleFilter.value;
    const difficultyValue = difficultyFilter.value;

    classCards.forEach(card => {
      const title = card.querySelector('h3').textContent.toLowerCase();
      const role = card.querySelector('.bg-blue-600').textContent.trim();
      const difficulty = card.querySelector('.bg-purple-600').textContent.replace('Difficult√© ', '').trim();
      
      const matchesSearch = title.includes(searchTerm);
      const matchesRole = !roleValue || role === roleValue;
      const matchesDifficulty = !difficultyValue || difficulty === difficultyValue;
      
      if (matchesSearch && matchesRole && matchesDifficulty) {
        card.style.display = '';
      } else {
        card.style.display = 'none';
      }
    });
  }

  if (searchInput && roleFilter && difficultyFilter) {
    searchInput.addEventListener('input', filterClasses);
    roleFilter.addEventListener('change', filterClasses);
    difficultyFilter.addEventListener('change', filterClasses);
  }

  // Gestion du modal pour les sorts et passifs
  const spellButtons = document.querySelectorAll('.view-spells');
  const modal = document.getElementById('spells-modal');
  const closeModal = document.getElementById('close-modal');
  const modalTitle = document.getElementById('modal-title');
  const spellsContainer = document.getElementById('spells-container');
  const passivesContainer = document.getElementById('passives-container');

  spellButtons.forEach(button => {
    button.addEventListener('click', () => {
      const classSlug = button.getAttribute('data-class');
      const classData = spellsAndPassives[classSlug];
      
      if (classData) {
        modalTitle.textContent = `Sorts et passifs - ${classData.name}`;
        
        // Remplir les sorts
        spellsContainer.innerHTML = '';
        classData.spells.forEach(spell => {
          const elementColor = getElementColor(spell.element);
          spellsContainer.innerHTML += `
            <div class="bg-gray-700/70 p-4 rounded-lg">
              <div class="flex justify-between items-center mb-2">
                <h4 class="font-medium">${spell.name}</h4>
                <span class="text-xs px-2 py-1 rounded-full ${elementColor}">
                  ${spell.element}
                </span>
              </div>
              <p class="text-sm text-gray-300 mb-2">${spell.description}</p>
              <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-wakfu-secondary mr-1" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
                </svg>
                <span class="text-xs text-gray-400">Niveau ${spell.level}</span>
              </div>
            </div>
          `;
        });
        
        // Remplir les passifs
        passivesContainer.innerHTML = '';
        classData.passives.forEach(passive => {
          passivesContainer.innerHTML += `
            <div class="bg-gray-700/70 p-4 rounded-lg">
              <h4 class="font-medium mb-2">${passive.name}</h4>
              <p class="text-sm text-gray-300">${passive.description}</p>
            </div>
          `;
        });
        
        modal.classList.remove('hidden');
      }
    });
  });

  closeModal.addEventListener('click', () => {
    modal.classList.add('hidden');
  });

  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.classList.add('hidden');
    }
  });

  // Couleurs pour les √©l√©ments
  function getElementColor(element) {
    const colors = {
      'Feu': 'bg-red-600 text-white',
      'Eau': 'bg-blue-600 text-white',
      'Terre': 'bg-amber-600 text-white',
      'Air': 'bg-green-600 text-white',
      'Neutre': 'bg-gray-500 text-white'
    };
    return colors[element] || 'bg-gray-500 text-white';
  }
  
  // Animation des cartes
  classCards.forEach((card, index) => {
    card.style.opacity = '0';
    card.style.transform = 'translateY(20px)';
    
    setTimeout(() => {
      card.style.transition = 'all 0.5s ease';
      card.style.opacity = '1';
      card.style.transform = 'translateY(0)';
    }, 50 * index);
  });
</script> 
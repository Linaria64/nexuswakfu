---
import MainLayout from '../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';

// R√©cup√©rer les donn√©es des collections
const classes = await getCollection('classes');
const metiers = await getCollection('metiers');
const donjons = await getCollection('donjons');

// D√©finir les statistiques du site
const stats = [
  { label: "Classes", value: classes.length, icon: "üë§" },
  { label: "M√©tiers", value: metiers.length, icon: "üõ†Ô∏è" },
  { label: "Donjons", value: donjons.filter(d => d.data && d.data.name).length, icon: "üè∞" },
  { label: "Qu√™tes", value: "50+", icon: "üìú" }
];

// D√©finir les fonctionnalit√©s
const features = [
  {
    title: "Classes",
    description: "D√©couvrez les 18 classes uniques de Wakfu et leurs sp√©cificit√©s",
    icon: "üë§",
    link: "/classes/"
  },
  {
    title: "Donjons",
    description: "Strat√©gies et astuces pour tous les donjons du niveau 1 au 230",
    icon: "üè∞",
    link: "/donjons/"
  },
  {
    title: "M√©tiers",
    description: "Guides des m√©tiers de r√©colte et d'artisanat",
    icon: "üõ†Ô∏è",
    link: "/metiers/"
  },
  {
    title: "Qu√™tes",
    description: "Parcours des qu√™tes principales et secondaires",
    icon: "üìú",
    link: "/quetes/"
  }
];
---

<MainLayout title="Accueil - Nexus Wakfu" description="Votre ressource compl√®te sur le monde de Wakfu avec des guides, des tutoriels et des informations sur les classes, donjons et m√©tiers">
  <!-- Hero Section avec Parallax -->
  <div class="relative min-h-screen flex items-center justify-center overflow-hidden">
    <div class="absolute inset-0 z-0">
      <div class="absolute inset-0 bg-gradient-to-b from-transparent to-gray-900"></div>
      <img src="/images/city-wakfu-upscaled.jpg" alt="Wakfu World" class="w-full h-full object-cover opacity-40">
    </div>
    
    <div class="relative z-10 text-center px-4 max-w-5xl mx-auto" style="margin-top: -5rem;">
      <h1 class="text-6xl md:text-7xl font-bold mb-8 text-white font-heading title-fade-in">
        <span class="text-wakfu-secondary">Nexus</span> Wakfu
      </h1>
      <p class="text-lg md:text-xl text-gray-200 mb-12 leading-relaxed">
        Plongez dans l'univers magique du World of Twelve. Explorez, combattez et fa√ßonnez le monde qui vous entoure dans ce MMORPG tactique unique o√π chaque d√©cision compte.
      </p>
      <div class="flex flex-wrap gap-8 justify-center">
        <a href="https://naquos.github.io/Gearfu/?itemsId=5580,30223" target="_blank" rel="noopener noreferrer" class="btn-secondary text-xl px-10 py-5">
          Tri Gearfu
        </a>
        <a href="https://zenithwakfu.com" target="_blank" rel="noopener noreferrer" class="btn-outline text-xl px-10 py-5">
          Builder Zenith
        </a>
      </div>
    </div>
    
    <div class="absolute bottom-0 left-0 right-0 z-10">
      <div class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          {stats.map(stat => (
            <div class="bg-gray-800/80 backdrop-blur-sm border border-gray-700 rounded-xl p-4 text-center transform hover:scale-105 transition-transform">
              <div class="text-3xl mb-2">{stat.icon}</div>
              <div class="text-2xl font-bold text-wakfu-secondary mb-1">{stat.value}</div>
              <div class="text-gray-300">{stat.label}</div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>

  <!-- Section Lore -->
  <section class="py-20 bg-gray-900">
    <div class="container mx-auto px-4 text-center">
      <div class="max-w-3xl mx-auto animate-fade-in">
        <h2 class="text-5xl font-bold mb-6 text-white animate-slide-down" style="animation-delay: 0.2s;">
          L'Histoire de <span class="text-wakfu-secondary">Wakfu</span>
        </h2>
        <div class="h-1 w-20 bg-wakfu-secondary mx-auto mb-8 animate-scale-in" style="animation-delay: 0.4s;"></div>
        <p class="text-xl text-gray-300 leading-relaxed mb-8 animate-fade-in" style="animation-delay: 0.6s;">
          Bienvenue dans le Monde des Douze durant l'√àre du Wakfu, environ 1000 ans apr√®s les √©v√©nements connus des h√©ros de l'√àre des Dofus.
        </p>
        <a href="/quetes" class="btn-primary text-lg px-8 py-4 inline-block hover:shadow-glow animate-slide-right" style="animation-delay: 0.8s;">
          Explorer les Qu√™tes
        </a>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-20">
        <div class="bg-gray-800 rounded-xl p-6 border border-gray-700 transform hover:scale-105 transition-transform animate-slide-up" style="animation-delay: 0.3s;">
          <div class="text-3xl text-wakfu-secondary mb-4">üìú</div>
          <h3 class="text-xl font-bold mb-4 text-white">Le Chaos d'Ogrest</h3>
          <p class="text-gray-300">
            Plong√© dans la folie par l'amour et le pouvoir des six Dofus Primordiaux, l'ogre Ogrest d√©clencha un d√©luge qui changea la face du monde √† jamais.
          </p>
        </div>
        
        <div class="bg-gray-800 rounded-xl p-6 border border-gray-700 transform hover:scale-105 transition-transform animate-slide-up" style="animation-delay: 0.5s;">
          <div class="text-3xl text-wakfu-secondary mb-4">‚ö°</div>
          <h3 class="text-xl font-bold mb-4 text-white">L'√ânergie du Wakfu</h3>
          <p class="text-gray-300">
            Le Wakfu, force vitale et cr√©atrice, fa√ßonne les √©cosyst√®mes en reconstruction. Son √©quilibre avec la Stasis est crucial pour l'avenir du monde.
          </p>
        </div>
        
        <div class="bg-gray-800 rounded-xl p-6 border border-gray-700 transform hover:scale-105 transition-transform animate-slide-up" style="animation-delay: 0.7s;">
          <div class="text-3xl text-wakfu-secondary mb-4">üåç</div>
          <h3 class="text-xl font-bold mb-4 text-white">Un Monde Vivant</h3>
          <p class="text-gray-300">
            Dans cet univers unique, vos actions fa√ßonnent v√©ritablement le monde : l'√©cosyst√®me, l'√©conomie et m√™me la politique sont entre les mains des joueurs.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Section Classes -->
  <section class="py-20 bg-gray-800">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto text-center mb-12 animate-fade-in">
        <h2 class="text-4xl font-bold mb-4 text-wakfu-secondary animate-slide-down" style="animation-delay: 0.3s;">
          D√©couvrir les Classes
        </h2>
        <div class="h-1 w-20 bg-wakfu-secondary mx-auto mb-8 animate-scale-in" style="animation-delay: 0.5s;"></div>
        <a href="/classes" class="btn-primary text-lg px-8 py-4 inline-block hover:shadow-glow animate-slide-left" style="animation-delay: 0.7s;">
          D√©couvrir les Classes
        </a>
      </div>
      
      <div class="class-carousel relative overflow-hidden">
        <div class="carousel-inner flex transition-transform duration-500" id="classCarousel">
          {classes.map(wakfuClass => (
            <div 
              class="carousel-item flex-shrink-0 w-full sm:w-1/2 lg:w-1/4 px-3 group cursor-default"
            >
              <div class="bg-gray-900 rounded-xl overflow-hidden hover:bg-gray-800 transition-colors h-full">
                <div class="relative">
                  <img 
                    src={wakfuClass.data.image?.src || "/images/classes/default.jpg"} 
                    alt={wakfuClass.data.name}
                    class="w-full h-48 object-cover"
                  />
                  <div class="absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"></div>
                </div>
                <div class="p-6">
                  <h3 class="text-xl font-bold mb-2 text-white group-hover:text-wakfu-secondary transition-colors">
                    {wakfuClass.data.name}
                  </h3>
                  <p class="text-sm text-wakfu-secondary mb-3">{wakfuClass.data.role}</p>
                  <p class="text-gray-400 line-clamp-2">
                    {wakfuClass.data.description}
                  </p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Call to Action -->
  <section class="relative py-20 overflow-hidden">
    <div class="absolute inset-0 z-0">
      <div class="absolute inset-0 bg-gradient-to-r from-gray-900 to-transparent"></div>
      <img src="/images/wakfu-cta-background.jpg" alt="Join Wakfu" class="w-full h-full object-cover opacity-30">
    </div>
    
    <div class="relative z-10 container mx-auto px-4">
      <div class="max-w-2xl animate-fade-in" style="animation-delay: 0.3s;">
        <h2 class="text-4xl font-bold mb-6 text-white animate-slide-up" style="animation-delay: 0.5s;">
          Pr√™t √† commencer <span class="text-wakfu-secondary">l'aventure</span> ?
        </h2>
        <p class="text-xl mb-8 text-gray-300 animate-fade-in" style="animation-delay: 0.7s;">
          Rejoignez des milliers d'aventuriers dans le World of Twelve et √©crivez votre propre l√©gende.
        </p>
        <div class="flex flex-wrap gap-8">
          <a 
            href="https://www.wakfu.com/fr/mmorpg/telecharger" 
            target="_blank"
            rel="noopener noreferrer"
            class="btn-primary text-lg px-10 py-5 animate-slide-right"
            style="animation-delay: 0.9s;"
          >
            T√©l√©charger Wakfu
          </a>
          <a 
            href="/guides/debuter" 
            class="btn-outline text-lg px-10 py-5 animate-slide-left"
            style="animation-delay: 1.1s;"
          >
            Guide du D√©butant
          </a>
        </div>
      </div>
    </div>
  </section>
</MainLayout>

<style>
  /* Style de base pour tous les boutons avec glassmorphism */
  .btn-primary, .btn-secondary, .btn-outline {
    @apply rounded-lg font-medium inline-block transition-all duration-300 transform hover:-translate-y-1;
    @apply backdrop-blur-sm border border-white/20 shadow-lg;
    @apply text-white;
    position: relative;
    overflow: hidden;
  }
  
  /* Effet n√©on pour tous les boutons */
  .btn-primary::before, .btn-secondary::before, .btn-outline::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: -1;
    opacity: 0.7;
    transition: all 0.3s ease;
  }
  
  /* Effet hover pour tous les boutons */
  .btn-primary:hover::before, .btn-secondary:hover::before, .btn-outline:hover::before {
    opacity: 0.9;
    box-shadow: 0 0 20px 5px rgba(255, 255, 255, 0.2);
  }
  
  /* Styles sp√©cifiques pour chaque type de bouton */
  .btn-primary::before {
    background: linear-gradient(135deg, rgba(56, 189, 248, 0.7) 0%, rgba(37, 99, 235, 0.7) 100%);
  }
  
  .btn-secondary::before {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.7) 0%, rgba(124, 58, 237, 0.7) 100%);
  }
  
  .btn-outline::before {
    background: linear-gradient(135deg, rgba(96, 165, 250, 0.5) 0%, rgba(59, 130, 246, 0.5) 100%);
  }
  
  /* Styles pour le carousel */
  .class-carousel {
    width: 100%;
    padding: 0 0.5rem;
  }
  
  .carousel-inner {
    width: 100%;
    animation: scrollCarousel 30s linear infinite;
  }
  
  .hover\:shadow-glow:hover {
    box-shadow: 0 0 15px 3px rgba(56, 189, 248, 0.6);
  }
  
  @keyframes scrollCarousel {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(calc(-100% / 2));
    }
  }
  
  .carousel-inner:hover {
    animation-play-state: paused;
  }
  
  /* Animations d'apparition */
  .animate-fade-in {
    opacity: 0;
    animation: fadeIn 1s ease forwards;
  }
  
  .animate-slide-up {
    opacity: 0;
    transform: translateY(30px);
    animation: slideUp 1s ease forwards;
  }
  
  .animate-slide-down {
    opacity: 0;
    transform: translateY(-30px);
    animation: slideDown 1s ease forwards;
  }
  
  .animate-slide-left {
    opacity: 0;
    transform: translateX(-50px);
    animation: slideLeft 1s ease forwards;
  }
  
  .animate-slide-right {
    opacity: 0;
    transform: translateX(50px);
    animation: slideRight 1s ease forwards;
  }
  
  .animate-scale-in {
    opacity: 0;
    transform: scale(0.5);
    animation: scaleIn 1s ease forwards;
  }
  
  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }
  
  @keyframes slideUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slideDown {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slideLeft {
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  @keyframes slideRight {
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  @keyframes scaleIn {
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  
  /* Simple fade-in for the whole title */
  .title-fade-in {
    opacity: 0;
    animation: fadeInTitle 1.5s ease 0.5s forwards; /* Fade in over 1.5s after 0.5s delay */
  }

  @keyframes fadeInTitle {
    to {
      opacity: 1;
    }
  }
</style>

<script>
  // Duplicate items to create infinite scroll effect
  document.addEventListener('DOMContentLoaded', () => {
    const carousel = document.getElementById('classCarousel');
    if (carousel) {
      const items = carousel.querySelectorAll('.carousel-item');
      items.forEach(item => {
        const clone = item.cloneNode(true);
        carousel.appendChild(clone);
      });
    }
  });
</script>
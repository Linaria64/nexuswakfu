---
import MainLayout from '../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';

// R√©cup√©rer les donn√©es des collections
const classes = await getCollection('classes');
const metiers = await getCollection('metiers');
const donjons = await getCollection('donjons');

// D√©finir les statistiques du site
const stats = [
  { label: "Classes", value: classes.length, icon: "üë§" },
  { label: "M√©tiers", value: metiers.length, icon: "üõ†Ô∏è" },
  { label: "Donjons", value: donjons.filter(d => d.data && d.data.name).length, icon: "üè∞" },
  { label: "Qu√™tes", value: "50+", icon: "üìú" }
];

// D√©finir les fonctionnalit√©s
const features = [
  {
    title: "Classes",
    description: "D√©couvrez les 18 classes uniques de Wakfu et leurs sp√©cificit√©s",
    icon: "üë§",
    link: "/classes/"
  },
  {
    title: "Donjons",
    description: "Strat√©gies et astuces pour tous les donjons du niveau 1 au 230",
    icon: "üè∞",
    link: "/donjons/"
  },
  {
    title: "M√©tiers",
    description: "Guides des m√©tiers de r√©colte et d'artisanat",
    icon: "üõ†Ô∏è",
    link: "/metiers/"
  },
  {
    title: "Qu√™tes",
    description: "Parcours des qu√™tes principales et secondaires",
    icon: "üìú",
    link: "/quetes/"
  }
];
---

<MainLayout title="Accueil - Nexus Wakfu" description="Votre ressource compl√®te sur le monde de Wakfu avec des guides, des tutoriels et des informations sur les classes, donjons et m√©tiers" showAnnouncement={true}>
  <!-- Hero Section -->
  <section class="py-20 bg-gray-900 border-b border-gray-800">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl md:text-5xl font-bold mb-6 text-white">
        <span class="text-wakfu-secondary">Nexus</span> Wakfu
      </h1>
      <p class="text-xl text-gray-300 mb-10 max-w-3xl mx-auto">
        Wakfu est un MMORPG tactique au tour par tour qui se d√©roule dans l'univers du Krosmoz. Explorez un monde color√©, ma√Ætrisez l'une des 18 classes uniques et participez √† un √©cosyst√®me dynamique o√π vos actions ont un impact r√©el sur le monde.
      </p>
      <div class="flex flex-wrap gap-4 justify-center">
        <a href="https://zenithwakfu.com" target="_blank" rel="noopener noreferrer" class="btn-primary">
          Builder Zenith
        </a>
        <a href="/donjons/" class="btn-outline">
          Strat√©gies de Donjons
        </a>
      </div>
    </div>
  </section>
  
  <!-- Statistiques du site -->
  <section class="py-12 bg-gray-950">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        {stats.map(stat => (
          <div class="bg-gray-900 border border-gray-800 rounded-lg p-6 text-center">
            <div class="text-4xl mb-2">{stat.icon}</div>
            <div class="text-3xl font-bold text-wakfu-secondary mb-2">{stat.value}</div>
            <div class="text-gray-400">{stat.label}</div>
          </div>
        ))}
      </div>
    </div>
  </section>
  
  <!-- Pr√©sentation du jeu -->
  <section class="py-16 bg-gray-900">
    <div class="container mx-auto px-4">
      <h2 class="section-title text-center mb-8">√Ä propos de Wakfu</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
        <div>
          <h3 class="text-2xl font-bold mb-4 text-wakfu-secondary">Un monde riche et √©volutif</h3>
          <p class="text-gray-300 mb-4">
            Dans Wakfu, vous incarnez un h√©ros dans un monde fantasy color√© qui a √©t√© d√©vast√© par les actions d'Ogrest. Six cents ans apr√®s le d√©luge provoqu√© par cette cr√©ature, vous devez reconstruire le monde et affronter de nouvelles menaces.
          </p>
          <p class="text-gray-300 mb-4">
            Ce qui distingue Wakfu des autres MMORPGs est son √©cosyst√®me unique o√π les actions des joueurs ont un impact r√©el : cueillir des ressources sans les replanter peut mener √† l'extinction d'esp√®ces, les monstres ont des cycles de reproduction, et l'√©conomie est enti√®rement g√©r√©e par les joueurs.
          </p>
          <p class="text-gray-300">
            Le syst√®me politique permet aux joueurs d'√©lire des gouverneurs pour chaque nation, qui peuvent √©tablir des lois et fa√ßonner le d√©veloppement de leurs territoires.
          </p>
        </div>
        <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
          <h3 class="text-2xl font-bold mb-4 text-wakfu-secondary">Caract√©ristiques uniques</h3>
          <ul class="space-y-3">
            <li class="flex items-start">
              <span class="text-wakfu-secondary mr-2">‚ú¶</span>
              <span>Combats tactiques au tour par tour sur une grille</span>
            </li>
            <li class="flex items-start">
              <span class="text-wakfu-secondary mr-2">‚ú¶</span>
              <span>18 classes uniques avec des m√©caniques distinctes</span>
            </li>
            <li class="flex items-start">
              <span class="text-wakfu-secondary mr-2">‚ú¶</span>
              <span>Syst√®me √©cologique dynamique influenc√© par les joueurs</span>
            </li>
            <li class="flex items-start">
              <span class="text-wakfu-secondary mr-2">‚ú¶</span>
              <span>Politique et gouvernance g√©r√©es par la communaut√©</span>
            </li>
            <li class="flex items-start">
              <span class="text-wakfu-secondary mr-2">‚ú¶</span>
              <span>√âconomie enti√®rement dirig√©e par les joueurs</span>
            </li>
            <li class="flex items-start">
              <span class="text-wakfu-secondary mr-2">‚ú¶</span>
              <span>Syst√®me de guildes et d'alliances d√©velopp√©</span>
            </li>
            <li class="flex items-start">
              <span class="text-wakfu-secondary mr-2">‚ú¶</span>
              <span>PvP optionnel et zones √† risques</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Fonctionnalit√©s -->
  <section class="py-16 bg-gray-950 border-y border-gray-800">
    <div class="container mx-auto px-4">
      <h2 class="section-title text-center mb-12">Explorez le contenu</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        {features.map(feature => (
          <a 
            href={feature.link}
            class="bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-wakfu-secondary transition-colors"
          >
            <div class="text-4xl mb-4">{feature.icon}</div>
            <h3 class="text-xl font-bold mb-2 text-white">
              {feature.title}
            </h3>
            <p class="text-gray-400">{feature.description}</p>
          </a>
        ))}
      </div>
    </div>
  </section>
  
  <!-- Classes Populaires -->
  <section class="py-16 bg-gray-900">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row items-center justify-between mb-10">
        <h2 class="section-title mb-0">Classes populaires</h2>
        <a href="/classes/" class="text-wakfu-secondary hover:underline flex items-center">
          Voir toutes les classes
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </a>
      </div>
      
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        {classes.slice(0, 4).map(wakfuClass => (
          <a 
            href={`/classes/${wakfuClass.slug}/`}
            class="bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-wakfu-secondary transition-colors"
          >
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2 text-white">
                {wakfuClass.data.name}
              </h3>
              <p class="text-sm text-gray-500 mb-3">{wakfuClass.data.role}</p>
              <p class="text-gray-400 line-clamp-3">
                {wakfuClass.data.description?.substring(0, 120)}...
              </p>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>
  
  <!-- Call to Action -->
  <section class="py-16 bg-gray-950 border-t border-gray-800">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl font-bold mb-6 text-white">Pr√™t √† rejoindre l'aventure ?</h2>
      <p class="text-xl mb-8 max-w-3xl mx-auto text-gray-300">
        Explorez nos guides complets et ma√Ætrisez tous les aspects du monde de Wakfu d√®s aujourd'hui.
      </p>
      <div class="flex flex-wrap gap-4 justify-center">
        <a 
          href="https://www.wakfu.com/fr/mmorpg/telecharger" 
          target="_blank"
          rel="noopener noreferrer"
          class="btn-primary"
        >
          T√©l√©charger Wakfu
        </a>
        <a 
          href="/classes/" 
          class="btn-outline"
        >
          Choisir une classe
        </a>
      </div>
    </div>
  </section>
</MainLayout>

<style>
  .btn-primary {
    @apply bg-wakfu-primary hover:bg-opacity-90 text-white px-6 py-3 rounded-lg font-medium inline-block transition-colors;
  }
  
  .btn-outline {
    @apply border border-wakfu-secondary text-wakfu-secondary hover:bg-wakfu-secondary hover:bg-opacity-10 px-6 py-3 rounded-lg font-medium inline-block transition-colors;
  }
  
  .section-title {
    @apply text-2xl md:text-3xl font-bold text-white;
  }
</style> 
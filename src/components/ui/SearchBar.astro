---
export interface Props {
  placeholder?: string;
  fullWidth?: boolean;
}

const { 
  placeholder = "Rechercher...",
  fullWidth = false 
} = Astro.props;
---

<div class={`relative ${fullWidth ? 'w-full' : 'max-w-md'}`}>
  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-gray-400">
      <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
    </svg>
  </div>
  <input
    id="search-input"
    type="text"
    class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-wakfu-primary dark:focus:ring-wakfu-secondary focus:border-transparent"
    placeholder={placeholder}
  />
</div>

<script>
  const searchInput = document.getElementById('search-input');
  
  if (searchInput) {
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        const query = encodeURIComponent(searchInput.value);
        window.location.href = `/recherche/?q=${query}`;
      }
    });
  }
</script> 